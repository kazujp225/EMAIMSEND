# ユーザーフロー

## 1. 新規ユーザー登録 → 最初のメール送信

```mermaid
graph TD
    A[トップページ訪問] --> B[「無料で1通送ってみる」クリック]
    B --> C[メールアドレス入力]
    C --> D[認証メール送信]
    D --> E[メール認証]
    E --> F[エディタ画面]
    F --> G[メール本文ペースト]
    G --> H[「CSS強化」クリック]
    H --> I[処理中（5-10秒）]
    I --> J[プレビュー表示]
    J --> K{修正が必要?}
    K -->|はい| G
    K -->|いいえ| L[送信先選択]
    L --> M[「送信」クリック]
    M --> N[送信完了]
```

### 所要時間目標
- 合計: 30秒以内（認証除く）
- CSS強化: 5-10秒
- プレビュー表示: 即座

## 2. 業種別テンプレート選択

```mermaid
graph TD
    A[トップページ] --> B[「業種別デモを見る」クリック]
    B --> C[業種一覧表示]
    C --> D[業種選択]
    D --> E[テンプレート例表示]
    E --> F{このテンプレートを使う?}
    F -->|はい| G[エディタにインポート]
    F -->|いいえ| C
    G --> H[カスタマイズ]
    H --> I[CSS強化]
    I --> J[送信]
```

## 3. 有料プランへのアップグレード

```mermaid
graph TD
    A[ダッシュボード] --> B[送信上限到達通知]
    B --> C[「プランをアップグレード」クリック]
    C --> D[料金プラン比較]
    D --> E[プラン選択]
    E --> F[クレジットカード情報入力]
    F --> G[支払い確認]
    G --> H[アップグレード完了]
    H --> I[新しい送信枠で送信可能]
```

## 4. メール作成 → 配信 → 分析

```mermaid
graph TD
    A[エディタ] --> B[メール作成]
    B --> C[CSS強化]
    C --> D[プレビュー確認]
    D --> E[送信先選択]
    E --> F{配信方法}
    F -->|即時| G[即時送信]
    F -->|段階配信| H[段階配信設定]
    H --> I[第1段: 10%送信]
    I --> J[2時間待機]
    J --> K[結果確認]
    K --> L{開封率良好?}
    L -->|はい| M[残り90%送信]
    L -->|いいえ| N[内容調整]
    N --> M
    G --> O[配信完了]
    M --> O
    O --> P[リアルタイム分析]
    P --> Q[レポート確認]
```

## 5. チーム機能（スケールプラン以上）

```mermaid
graph TD
    A[管理者] --> B[チームメンバー招待]
    B --> C[招待メール送信]
    C --> D[メンバー参加]
    D --> E[役割設定]
    E --> F{役割}
    F -->|閲覧者| G[レポート閲覧のみ]
    F -->|編集者| H[テンプレート編集]
    F -->|送信者| I[メール送信]
    F -->|管理者| J[全権限]
```

## 主要画面遷移

### トップページ
```
Header
├── ロゴ
├── ナビゲーション（機能、業種別、料金、ドキュメント）
└── CTA（ログイン、無料で始める）

Hero
├── キャッチコピー
├── 説明文
├── CTA（無料で1通送ってみる、業種別デモを見る）
└── トラストインジケーター

Features（主要機能）
IndustryDemo（業種別デモ）
Pricing（料金プラン）
CTA（最終アクション）
Footer
```

### エディタ画面（今後実装）
```
Header
├── ロゴ
├── 保存ステータス
└── ユーザーメニュー

Sidebar
├── テンプレート一覧
├── 送信履歴
└── 設定

Main Editor
├── 件名入力
├── 本文エディタ
├── CSS強化ボタン
└── ツールバー

Preview Pane
├── デバイス切り替え（PC/モバイル）
├── メールクライアント選択
└── プレビュー表示

Action Bar
├── 下書き保存
├── テスト送信
└── 送信
```

## エラーハンドリング

### CSS強化失敗時
1. エラーメッセージ表示
2. 「再試行」ボタン提供
3. 元のテキストは保持
4. サポートリンク表示

### 送信失敗時
1. 失敗理由の明示
2. 修正方法の提示
3. 下書きとして自動保存
4. 再送信オプション

## アクセシビリティ

- キーボードナビゲーション対応
- スクリーンリーダー対応
- 十分なコントラスト比
- フォーカスインジケーター
